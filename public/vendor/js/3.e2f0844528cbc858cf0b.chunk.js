(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1Z2/":function(t,e,a){"use strict";a.r(e);var i=a("2IPJ"),o=a("CoqM"),n=a("PY6l"),s=a("LuDj"),r=a("x91n"),l=a("lEg9"),d=a("pHsK"),u={data:function(){return{loading:!0,fileLoading:!1,data:{file:void 0,status:"off"},positions:{data:[]},file:{error:void 0},ruleValidate:{name:[{required:!0,message:"名称必须填写",trigger:"blur"},{type:"string",min:2,max:50,message:"焦点图位置名称字符长度是2-50个字符",trigger:"blur"}],position_id:[{required:!0,type:"number",message:"焦点图位置必须选择",trigger:"change"}],sort:[{required:!0,type:"number",message:"焦点图排序必须选择",trigger:"blur"}],status:[{required:!0,message:"焦点图状态必须选择",trigger:"change"}],description:[{max:255,message:"位置说明最多支持255个字符",trigger:"blur"}],file:[{max:255,message:"图片必须上传",trigger:"change",required:!0}],url:[{required:!0,message:"跳转链接必须填写",trigger:"blur"}]}}}},c={name:"create",mixins:[l.a,u],components:{LUpload:d.a,IDrawer:r.a},mounted:function(){var t=this;this.$http.get("setting/focus/create").then(function(e){t.positions.data=e.positions}).finally(function(){t.loading=!1})},methods:{submit:function(t){var e=this;this.validate(t).then(function(){e.loading=!0,e.$http.post("setting/focus",e.data).then(function(){e.closeDrawer(!1)}).finally(function(){e.loading=!1})})}}},p=(a("R92I"),a("KHd+")),f=Object(p.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-drawer",{attrs:{title:"添加焦点图",loading:t.loading,width:720}},[a("Form",{ref:"formCreate",attrs:{model:t.data,"label-width":80,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"标题",prop:"name"}},[a("Input",{model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"位置",prop:"position_id"}},[a("Select",{model:{value:t.data.position_id,callback:function(e){t.$set(t.data,"position_id",e)},expression:"data.position_id"}},t._l(t.positions.data,function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name)+"\n                        ")])}),1)],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"排序",prop:"sort"}},[a("Input",{attrs:{number:""},model:{value:t.data.sort,callback:function(e){t.$set(t.data,"sort",e)},expression:"data.sort"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("i-switch",{attrs:{"true-value":"on","false-value":"off"},model:{value:t.data.status,callback:function(e){t.$set(t.data,"status",e)},expression:"data.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"跳转链接",prop:"url"}},[a("Input",{model:{value:t.data.url,callback:function(e){t.$set(t.data,"url",e)},expression:"data.url"}})],1),t._v(" "),a("FormItem",{attrs:{label:"图片",prop:"file"}},[a("l-upload",{staticClass:"thumbnail",attrs:{action:"/api/setting/focus/file"},model:{value:t.data.file,callback:function(e){t.$set(t.data,"file",e)},expression:"data.file"}})],1),t._v(" "),a("FormItem",{attrs:{label:"说明",prop:"description"}},[a("Input",{attrs:{type:"textarea",rows:6},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){return t.submit("formCreate")}}},[t._v("提交")])],1)],1)},[],!1,null,"28f31e11",null).exports,m={name:"update",mixins:[l.a,u],components:{LUpload:d.a,IDrawer:r.a},mounted:function(){var t=this;this.$http.get("setting/focus/".concat(this.props.id,"/edit")).then(function(e){t.positions.data=e.positions,t.data=e.row}).finally(function(){t.loading=!1})},methods:{submit:function(t){var e=this;this.validate(t).then(function(){e.loading=!0,e.$http.put("setting/focus/".concat(e.props.id),e.data).then(function(){e.closeDrawer(!1)}).finally(function(){e.loading=!1})})},file_success:function(t,e,a){this.data.file=t.url,this.fileLoading=!1},file_before:function(){this.fileLoading=!0},file_error:function(t,e){var a=e.errors;this.file.error=a.file[0],this.fileLoading=!1}}},h=(a("WLdk"),Object(p.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-drawer",{attrs:{title:"添加焦点图",loading:t.loading,width:720}},[a("Form",{ref:"formUpdate",attrs:{model:t.data,"label-width":80,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"标题",prop:"name"}},[a("Input",{model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"位置",prop:"position_id"}},[a("Select",{model:{value:t.data.position_id,callback:function(e){t.$set(t.data,"position_id",e)},expression:"data.position_id"}},t._l(t.positions.data,function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name)+"\n                        ")])}),1)],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"排序",prop:"sort"}},[a("Input",{attrs:{number:""},model:{value:t.data.sort,callback:function(e){t.$set(t.data,"sort",e)},expression:"data.sort"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("i-switch",{attrs:{"true-value":"on","false-value":"off"},model:{value:t.data.status,callback:function(e){t.$set(t.data,"status",e)},expression:"data.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"跳转链接",prop:"url"}},[a("Input",{model:{value:t.data.url,callback:function(e){t.$set(t.data,"url",e)},expression:"data.url"}})],1),t._v(" "),a("FormItem",{attrs:{label:"图片",prop:"file",error:t.file.error}},[a("l-upload",{staticClass:"thumbnail",attrs:{action:"/api/setting/focus/file-edit"},model:{value:t.data.file,callback:function(e){t.$set(t.data,"file",e)},expression:"data.file"}})],1),t._v(" "),a("FormItem",{attrs:{label:"说明",prop:"description"}},[a("Input",{attrs:{type:"textarea",rows:6},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){return t.submit("formUpdate")}}},[t._v("提交")])],1)],1)},[],!1,null,"1251328a",null).exports),g={name:"index",mixins:[s.a],components:{ITable:n.a,ISearch:o.a,IContent:i.a,Create:f,Update:h},data:function(){return{loading:!0,search:{},positions:{data:[]},table:{columns:[{title:"图片标题",slot:"name"},{title:"显示位置",slot:"position"},{title:"排序",slot:"sort"},{title:"状态",slot:"status"},{title:"图片说明",slot:"description"},{title:"操作",slot:"action"}]}}},mounted:function(){var t=this;this.$http.get("setting/focus/view").then(function(e){t.positions.data=e.positions}).finally(function(){t.loading=!1})},methods:{getLists:function(t){var e=this;this.loading=!0,this.$http.get("setting/focus",{params:Object.assign({},this.search,{page:t})}).then(function(t){e.table.data=t.data,e.page.total=t.total,e.page.current=t.current_page}).finally(function(){e.loading=!1})},remove:function(t){var e=this;this.loading=!0,this.$http.delete("setting/focus/".concat(t.id)).then(function(){e.getLists(e.page.current)}).finally(function(){e.loading=!1})}},filters:{status:function(t){return"on"===t?"开启":"关闭"},position:function(t){return t.name||""}}},v=Object(p.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-content",{attrs:{"spin-show":t.loading}},[a("i-search",[a("FormItem",{attrs:{label:"名称"}},[a("Input",{model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"位置"}},[a("Select",{attrs:{clearable:""},model:{value:t.search.position_id,callback:function(e){t.$set(t.search,"position_id",e)},expression:"search.position_id"}},t._l(t.positions.data,function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),a("FormItem",{attrs:{label:"状态"}},[a("Select",{attrs:{clearable:""},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[a("Option",{attrs:{value:"on"}},[t._v("开启")]),t._v(" "),a("Option",{attrs:{value:"off"}},[t._v("关闭")])],1)],1),t._v(" "),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.getLists(1)}}},[t._v("搜索")]),t._v(" "),a("Button",{attrs:{type:"success",icon:"ios-add"},on:{click:function(e){return t.openComponent("Create")}}},[t._v("添加")]),t._v(" "),a("Button",{attrs:{type:"info"},on:{click:function(e){return t.openRoute("setting.focus.position")}}},[t._v("焦点图位置管理")])],1)],1),t._v(" "),a("i-table",[a("Table",{attrs:{columns:t.table.columns,data:t.table.data},scopedSlots:t._u([{key:"name",fn:function(e){var i=e.row;return e.index,[a("span",[t._v(t._s(i.name))])]}},{key:"position",fn:function(e){var i=e.row;return e.index,[a("span",[t._v(t._s(t._f("position")(i.positions)))])]}},{key:"sort",fn:function(e){var i=e.row;return e.index,[a("span",[t._v(t._s(i.sort))])]}},{key:"status",fn:function(e){var i=e.row;return e.index,[a("span",[t._v(t._s(t._f("status")(i.status)))])]}},{key:"description",fn:function(e){var i=e.row;return e.index,[a("span",[t._v(t._s(i.description))])]}},{key:"action",fn:function(e){var i=e.row;return e.index,[a("Button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return t.openComponent("Update",i)}}},[t._v("编辑")]),t._v(" "),a("Poptip",{attrs:{confirm:"",title:"你确定要删除这个权限吗？"},on:{"on-ok":function(e){return t.remove(i)}}},[a("Button",{attrs:{type:"error",size:"small"}},[t._v("删除")])],1)]}}])})],1),t._v(" "),a(t.component.is,{tag:"component",attrs:{props:t.component.prop},on:{"on-close":t.closeComponent,"on-refresh":t.getLists}})],1)},[],!1,null,"15e5e1c0",null);e.default=v.exports},"2IPJ":function(t,e,a){"use strict";var i={name:"i-content",props:{spinShow:{type:Boolean,default:!0}}},o=(a("CvB1"),a("KHd+")),n=Object(o.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-wrapper"},[this._t("default"),this._v(" "),this.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):this._e()],2)},[],!1,null,"29a77876",null);e.a=n.exports},"3Q9P":function(t,e,a){"use strict";e.a={methods:{validate:function(t){var e=this;return new Promise(function(a,i){e.$refs[t].validate(function(t){t?a():i()})})}}}},"5Q8M":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.modal-body[data-v-e3944ca2] {\n    height: calc(100% - 53px);\n    overflow-y: auto;\n    margin-right: -16px;\n    padding-right: 16px;\n}\n.compon-drawer-footer[data-v-e3944ca2]{\n    border-top: 1px solid #e8e8e8;\n    padding: 10px 16px;\n    text-align: right;\n    background: #fff;\n}\n.compon-drawer-footer *[data-v-e3944ca2]{\n    text-align: right;\n}\n",""])},"5nZK":function(t,e,a){"use strict";var i=a("I3AI");a.n(i).a},CoqM:function(t,e,a){"use strict";var i={name:"i-search",props:{value:{type:Object},title:{type:String,default:"搜索"},icon:{type:String,default:"ios-search"}}},o=a("KHd+"),n=Object(o.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("Card",{attrs:{title:this.title,icon:this.icon}},[e("Form",{ref:"formSearch",attrs:{model:this.value,inline:"","label-width":60}},[this._t("default")],2)],1)},[],!1,null,"aca4acc4",null);e.a=n.exports},CvB1:function(t,e,a){"use strict";var i=a("fr25");a.n(i).a},Dd3c:function(t,e,a){var i=a("RBg5");"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,o);i.locals&&(t.exports=i.locals)},Fc8h:function(t,e,a){var i=a("mj7H");"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,o);i.locals&&(t.exports=i.locals)},I3AI:function(t,e,a){var i=a("5Q8M");"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,o);i.locals&&(t.exports=i.locals)},LuDj:function(t,e,a){"use strict";var i=a("3Q9P");e.a={mixins:[i.a],data:function(){return{page:{current:1,total:100},table:{columns:[],data:[]},component:{is:"",prop:null},loading:!0}},mounted:function(){var t=this;this.$nextTick(function(){t.getLists()})},methods:{pageChange:function(t){this.getLists(t)},openComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.component.is=t,this.component.prop=e},closeComponent:function(){this.component.is="",this.component.prop=null},openRoute:function(t,e){this.$router.push({name:t,query:e})},getLists:function(){}}}},PY6l:function(t,e,a){"use strict";var i={name:"i-table",props:{current:{type:Number},total:{type:Number},pageSize:{type:Number,default:15},title:{type:String,default:"列表"},icon:{type:String,default:"ios-list-box"}},methods:{change:function(t){this.$emit("on-page-change",t)}}},o=(a("Y4hK"),a("KHd+")),n=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{title:t.title,icon:t.icon}},[t._t("default"),t._v(" "),a("Page",{attrs:{current:t.current,total:t.total,"page-size":t.pageSize,"show-total":"",size:"small"},on:{"on-change":t.change}})],2)},[],!1,null,"25badb01",null);e.a=n.exports},Qdlz:function(t,e,a){var i=a("RzmX");"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,o);i.locals&&(t.exports=i.locals)},R92I:function(t,e,a){"use strict";var i=a("Dd3c");a.n(i).a},RBg5:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".upload-file .drag-file[data-v-28f31e11]{padding:25px 0;position:relative;height:134px}.upload-file .drag-file .drag[data-v-28f31e11]{width:100%;height:100%}.upload-file .drag-file .file[data-v-28f31e11]{position:absolute;height:100%;width:100%;top:0;left:0;padding:5px}.upload-file .drag-file .file img[data-v-28f31e11]{max-width:100%;max-height:100%}.upload-file .drag-file .loading[data-v-28f31e11]{position:absolute;height:100%;width:100%;top:0;left:0}",""])},RzmX:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".upload-file .drag-file[data-v-1251328a]{padding:25px 0;position:relative;height:134px}.upload-file .drag-file .drag[data-v-1251328a]{width:100%;height:100%}.upload-file .drag-file .file[data-v-1251328a]{position:absolute;height:100%;width:100%;top:0;left:0;padding:5px}.upload-file .drag-file .file img[data-v-1251328a]{max-width:100%;max-height:100%}.upload-file .drag-file .loading[data-v-1251328a]{position:absolute;height:100%;width:100%;top:0;left:0}",""])},UqFG:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".ivu-page[data-v-25badb01]{margin-top:15px;text-align:right}",""])},WLdk:function(t,e,a){"use strict";var i=a("Qdlz");a.n(i).a},Y4hK:function(t,e,a){"use strict";var i=a("fByT");a.n(i).a},fByT:function(t,e,a){var i=a("UqFG");"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,o);i.locals&&(t.exports=i.locals)},fr25:function(t,e,a){var i=a("h11m");"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,o);i.locals&&(t.exports=i.locals)},h11m:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".content-wrapper[data-v-29a77876]{padding:18px;overflow:auto}.content-wrapper>.ivu-card[data-v-29a77876]{margin-bottom:10px}",""])},lEg9:function(t,e,a){"use strict";var i=a("3Q9P");e.a={mixins:[i.a],props:{props:null},data:function(){return{drawer:{value:!0}}},methods:{closeDrawer:function(t){!1===t&&(this.drawer.value=!1,this.drawer.props=null,this.$emit("on-close",!1),this.$emit("on-refresh"))}}}},mj7H:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".upload-drag{display:block;padding:4px;margin-bottom:20px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:4px;transition:border .2s ease-in-out}.upload-drag .ivu-upload-drag{height:100%}.upload-drag .drag-file{padding:25px 0;position:relative;height:100%}.upload-drag .drag-file .drag{width:100%;height:100%;position:relative}.upload-drag .drag-file .drag .ivu-icon{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.upload-drag .drag-file .file{position:absolute;height:100%;width:100%;top:0;left:0;padding:5px}.upload-drag .drag-file .file img{max-width:100%;max-height:100%;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.upload-drag .drag-file .loading{position:absolute;height:100%;width:100%;top:0;left:0}",""])},pHsK:function(t,e,a){"use strict";var i={name:"l-upload",props:{action:{type:String,required:!0},value:{type:String,default:""}},data:function(){return{file:{headers:{authorization:"bearer "+this.$store.state.auth.login,Accept:"application/json"},error:void 0,loading:!1}}},methods:{file_success:function(t,e,a){this.$emit("input",t.url),this.file.loading=!1},file_before:function(){this.file.loading=!0},file_error:function(t,e){var a=e.errors;this.$Message.error(a.file[0]),this.file.loading=!1}}},o=(a("tdbS"),a("KHd+")),n=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Upload",{staticClass:"upload-drag",attrs:{type:"drag",action:t.action,headers:t.file.headers,"on-success":t.file_success,"show-upload-list":!1,"before-upload":t.file_before,"on-error":t.file_error}},[a("div",{staticClass:"drag-file"},[""===t.value?a("div",{staticClass:"drag"},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}})],1):a("div",{staticClass:"file"},[a("img",{attrs:{src:t.value,alt:""}})]),t._v(" "),t.file.loading?a("div",{staticClass:"loading"},[a("Spin",{attrs:{size:"large",fix:""}})],1):t._e()])])},[],!1,null,null,null);e.a=n.exports},tdbS:function(t,e,a){"use strict";var i=a("Fc8h");a.n(i).a},x91n:function(t,e,a){"use strict";var i={name:"i-drawer",props:{title:{type:String,default:"弹窗"},width:{type:Number,default:720},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$parent.closeDrawer(t)}}},o=(a("5nZK"),a("KHd+")),n=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{title:t.title,value:!0,transfer:!1,"mask-closable":!1,width:t.width},on:{"on-visible-change":t.change}},[a("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"compon-drawer-footer"},[t._t("footer")],2),t._v(" "),t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},[],!1,null,"e3944ca2",null);e.a=n.exports}}]);