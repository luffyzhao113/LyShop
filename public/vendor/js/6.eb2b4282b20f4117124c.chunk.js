(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1wZO":function(t,e,n){"use strict";var a=n("rqBi");n.n(a).a},"2IPJ":function(t,e,n){"use strict";var a={name:"i-content",props:{spinShow:{type:Boolean,default:!1}}},r=(n("1wZO"),n("KHd+")),i=Object(r.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-wrapper"},[this._t("default"),this._v(" "),this.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):this._e()],2)},[],!1,null,"094f7294",null);e.a=i.exports},"3Q9P":function(t,e,n){"use strict";e.a={methods:{validate:function(t){var e=this;return new Promise(function(n,a){e.$refs[t].validate(function(t){t?n():a()})})}}}},CpXx:function(t,e,n){"use strict";var a=n("j3Ox");n.n(a).a},DH6s:function(t,e,n){var a=n("MczP");"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,r);a.locals&&(t.exports=a.locals)},"I+T0":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".content-wrapper[data-v-094f7294]{padding:18px;overflow:auto}.content-wrapper>.ivu-card[data-v-094f7294]{margin-bottom:10px}",""])},Ik8O:function(t,e,n){"use strict";n.r(e);var a=n("2IPJ"),r=n("LuDj"),i={name:"render",props:["root","node","data","parent"],methods:{append:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"create";this.$emit("on-append",t,e)},remove:function(t){this.$emit("on-remove",t)}}},o=(n("PnRM"),n("KHd+")),s=Object(o.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"tree-li"},[n("span",[n("Icon",{attrs:{type:t.data.children&&t.data.children.length>0?"ios-folder-outline":"ios-paper-outline"}}),t._v(" "),n("span",[n("Tooltip",{attrs:{content:t.data.description,placement:"right"}},[t._v("\n            "+t._s(t.data.name)+"\n            ")])],1)],1),t._v(" "),n("span",{staticClass:"tree-li-buttons"},[t.parent?[n("Button",{staticStyle:{width:"65px"},attrs:{type:"primary",size:"small",icon:"ios-add"},on:{click:function(e){return t.append(t.data)}}})]:[n("Button",{attrs:{type:"warning",size:"small",icon:"md-checkmark-circle-outline"},on:{click:function(e){return t.append(t.data,"update")}}}),t._v(" "),n("Button",{attrs:{type:"primary",size:"small",icon:"ios-add"},on:{click:function(e){return t.append(t.data)}}}),t._v(" "),n("Poptip",{attrs:{confirm:"",title:"你确定要删除这个菜单吗？"},on:{"on-ok":function(e){return t.remove(t.data)}}},[t.data.children&&t.data.children.length>0?t._e():n("Button",{attrs:{type:"error",size:"small",icon:"ios-remove"}})],1)]],2)])},[],!1,null,"b3031680",null).exports,l=n("lEg9"),u=n("x91n"),c={name:"create",components:{IDrawer:u.a},mixins:[l.a],data:function(){return{create:{parent_id:this.props.id,sort:99,authorities:[]},authorities:{data:[]},ruleValidate:{name:[{required:!0,message:"菜单名称必须填写",trigger:"blur"},{type:"string",min:2,max:20,message:"菜单名称字符长度是2-20个字符",trigger:"blur"}],url:[{required:!0,message:"菜单url必须填写",trigger:"blur"},{type:"string",min:2,max:50,message:"菜单url字符长度是2-50个字符",trigger:"blur"}],sort:[{required:!0,type:"number",message:"排序必须填写",trigger:"blur"},{type:"number",min:0,max:99,message:"排序数值在0-99之间",trigger:"blur"}]},loading:!0}},mounted:function(){var t=this;this.$http.get("authorities/menu/create").then(function(e){t.authorities.data=e}).finally(function(){t.loading=!1})},methods:{submit:function(t){var e=this;this.validate(t).then(function(){e.$http.post("authorities/menu",e.create).then(function(){e.closeDrawer(!1)})}).catch(function(){})},handleChange:function(t){this.create.authorities=t}}},p=Object(o.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i-drawer",{attrs:{title:"菜单添加",width:720,loading:t.loading}},[n("Form",{ref:"formCreate",attrs:{model:t.create,"label-width":100,rules:t.ruleValidate}},[n("FormItem",{attrs:{label:"上级菜单"}},[n("Input",{attrs:{value:t.props.name,disabled:""}})],1),t._v(" "),n("FormItem",{attrs:{label:"菜单名称",prop:"name"}},[n("Input",{model:{value:t.create.name,callback:function(e){t.$set(t.create,"name",e)},expression:"create.name"}})],1),t._v(" "),n("FormItem",{attrs:{label:"菜单url",prop:"url"}},[n("Input",{model:{value:t.create.url,callback:function(e){t.$set(t.create,"url",e)},expression:"create.url"}})],1),t._v(" "),n("FormItem",{attrs:{label:"菜单描述",prop:"description"}},[n("Input",{attrs:{type:"textarea",rows:4},model:{value:t.create.description,callback:function(e){t.$set(t.create,"description",e)},expression:"create.description"}})],1),t._v(" "),n("FormItem",{attrs:{label:"排序",prop:"sort"}},[n("Input",{attrs:{number:""},model:{value:t.create.sort,callback:function(e){t.$set(t.create,"sort",e)},expression:"create.sort"}})],1),t._v(" "),n("FormItem",{attrs:{label:"分配权限"}},[n("Transfer",{attrs:{titles:["可分配权限","已有权限"],"list-style":{width:"250px",height:"500px"},data:t.authorities.data,"target-keys":t.create.authorities},on:{"on-change":t.handleChange}})],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){return t.submit("formCreate")}}},[t._v("提交")])],1)],1)},[],!1,null,"a5e57e8c",null).exports,d={name:"update",mixins:[l.a],components:{IDrawer:u.a},mounted:function(){var t=this;this.$http.get("authorities/menu/".concat(this.props.id,"/edit")).then(function(e){e.data.parent=e.data.parent||{name:"顶级菜单"},t.update=e.data,t.authorities.data=e.authorities}).finally(function(){return t.loading=!1})},data:function(){return{loading:!0,update:{parent:{},authorities:[]},authorities:{data:[]},ruleValidate:{name:[{required:!0,message:"菜单名称必须填写",trigger:"blur"},{type:"string",min:2,max:20,message:"菜单名称字符长度是2-20个字符",trigger:"blur"}],url:[{required:!0,message:"菜单url必须填写",trigger:"blur"},{type:"string",min:2,max:50,message:"菜单url字符长度是2-50个字符",trigger:"blur"}],sort:[{required:!0,type:"number",message:"排序必须填写",trigger:"blur"},{type:"number",min:0,max:99,message:"排序数值在0-99之间",trigger:"blur"}]}}},methods:{submit:function(t){var e=this;this.validate(t).then(function(){e.$http.put("authorities/menu/".concat(e.props.id),e.update).then(function(){e.closeDrawer(!1)})}).catch(function(){})},handleChange:function(t){this.update.authorities=t}}},m=Object(o.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i-drawer",{attrs:{title:"菜单修改",width:720,loading:t.loading}},[n("Form",{ref:"formUpdate",attrs:{model:t.update,"label-width":100,rules:t.ruleValidate}},[n("FormItem",{attrs:{label:"上级菜单"}},[n("Input",{attrs:{disabled:""},model:{value:t.update.parent.name,callback:function(e){t.$set(t.update.parent,"name",e)},expression:"update.parent.name"}})],1),t._v(" "),n("FormItem",{attrs:{label:"菜单名称",prop:"name"}},[n("Input",{model:{value:t.update.name,callback:function(e){t.$set(t.update,"name",e)},expression:"update.name"}})],1),t._v(" "),n("FormItem",{attrs:{label:"菜单url",prop:"url"}},[n("Input",{model:{value:t.update.url,callback:function(e){t.$set(t.update,"url",e)},expression:"update.url"}})],1),t._v(" "),n("FormItem",{attrs:{label:"菜单描述",prop:"description"}},[n("Input",{attrs:{type:"textarea"},model:{value:t.update.description,callback:function(e){t.$set(t.update,"description",e)},expression:"update.description"}})],1),t._v(" "),n("FormItem",{attrs:{label:"排序",prop:"sort"}},[n("Input",{attrs:{number:""},model:{value:t.update.sort,callback:function(e){t.$set(t.update,"sort",e)},expression:"update.sort"}})],1),t._v(" "),n("FormItem",{attrs:{label:"分配权限"}},[n("Transfer",{attrs:{titles:["可分配权限","已有权限"],"list-style":{width:"250px",height:"500px"},data:t.authorities.data,"target-keys":t.update.authorities},on:{"on-change":t.handleChange}})],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){return t.submit("formUpdate")}}},[t._v("提交")])],1)],1)},[],!1,null,"a7a7e524",null).exports,h={name:"index",mixins:[r.a],components:{IContent:a.a,render:s,create:p,update:m},data:function(){return{data:[{id:0,name:"顶级菜单",expand:!0,children:[]}]}},methods:{getLists:function(){var t=this;this.loading=!0,this.$http.get("authorities/menu").then(function(e){t.data[0].children=t.setTreeData(e)}).finally(function(){t.loading=!1})},renderContent:function(t,e){var n=e.root,a=e.node,r=e.data;return t(s,{props:{root:n,node:a,data:r,parent:0===r.id},on:{"on-append":this.append,"on-remove":this.remove}})},append:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"create";this.openComponent(e,t)},remove:function(t){var e=this;this.loading=!0,this.$http.delete("authorities/menu/".concat(t.id)).then(function(t){e.getLists()})},setTreeData:function(t){var e=JSON.parse(JSON.stringify(t));return e.filter(function(t){var n=e.filter(function(e){return t.id==e.parent_id});return n.length>0&&(t.children=n),0==t.parent_id})}}},f=Object(o.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i-content",{attrs:{spinShow:t.loading}},[n("Card",[n("Tree",{attrs:{data:t.data,render:t.renderContent}})],1),t._v(" "),n(t.component.is,{tag:"component",attrs:{props:t.component.prop},on:{"on-close":t.closeComponent,"on-refresh":t.getLists}})],1)},[],!1,null,"aee056a6",null);e.default=f.exports},LuDj:function(t,e,n){"use strict";var a=n("3Q9P");e.a={mixins:[a.a],data:function(){return{page:{current:1,total:100},table:{columns:[],data:[]},component:{is:"",prop:null},loading:!0}},mounted:function(){var t=this;this.$nextTick(function(){t.getLists()})},methods:{pageChange:function(t){this.getLists(t)},openComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.component.is=t,this.component.prop=e},closeComponent:function(){this.component.is="",this.component.prop=null},getLists:function(){}}}},MczP:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".tree-li[data-v-b3031680]{display:inline-block;width:100%;font-size:14px}.tree-li .tree-li-buttons[data-v-b3031680]{display:inline-block;float:right;margin-right:32px}",""])},PnRM:function(t,e,n){"use strict";var a=n("DH6s");n.n(a).a},j3Ox:function(t,e,n){var a=n("wbTh");"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,r);a.locals&&(t.exports=a.locals)},lEg9:function(t,e,n){"use strict";var a=n("3Q9P");e.a={mixins:[a.a],props:{props:null},data:function(){return{drawer:{value:!0}}},methods:{closeDrawer:function(t){!1===t&&(this.drawer.value=!1,this.drawer.props=null,this.$emit("on-close",!1),this.$emit("on-refresh"))}}}},rqBi:function(t,e,n){var a=n("I+T0");"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,r);a.locals&&(t.exports=a.locals)},wbTh:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.modal-body[data-v-441e9ea6] {\n    height: calc(100% - 53px);\n    overflow-y: auto;\n    margin-right: -16px;\n    padding-right: 16px;\n}\n.compon-drawer-footer[data-v-441e9ea6]{\n    border-top: 1px solid #e8e8e8;\n    padding: 10px 16px;\n    text-align: right;\n    background: #fff;\n}\n.compon-drawer-footer *[data-v-441e9ea6]{\n    text-align: right;\n}\n",""])},x91n:function(t,e,n){"use strict";var a={name:"i-drawer",props:{title:{type:String,default:"弹窗"},width:{type:Number,default:520},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$parent.closeDrawer(t)}}},r=(n("CpXx"),n("KHd+")),i=Object(r.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Drawer",{attrs:{title:t.title,value:!0,transfer:!1,"mask-closable":!1,width:t.width},on:{"on-visible-change":t.change}},[n("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"compon-drawer-footer"},[t._t("footer")],2),t._v(" "),t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},[],!1,null,"441e9ea6",null);e.a=i.exports}}]);