(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1wZO":function(t,e,a){"use strict";var r=a("rqBi");a.n(r).a},"2IPJ":function(t,e,a){"use strict";var r={name:"i-content",props:{spinShow:{type:Boolean,default:!1}}},n=(a("1wZO"),a("KHd+")),o=Object(n.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-wrapper"},[this._t("default"),this._v(" "),this.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):this._e()],2)},[],!1,null,"094f7294",null);e.a=o.exports},"3Q9P":function(t,e,a){"use strict";e.a={methods:{validate:function(t){var e=this;return new Promise(function(a,r){e.$refs[t].validate(function(t){t?a():r()})})}}}},CoqM:function(t,e,a){"use strict";var r={name:"i-search",props:{value:{type:Object},title:{type:String,default:"搜索"},icon:{type:String,default:"ios-search"}}},n=a("KHd+"),o=Object(n.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("Card",{attrs:{title:this.title,icon:this.icon}},[e("Form",{ref:"formSearch",attrs:{model:this.value,inline:"","label-width":60}},[this._t("default")],2)],1)},[],!1,null,"aca4acc4",null);e.a=o.exports},CpXx:function(t,e,a){"use strict";var r=a("j3Ox");a.n(r).a},"I+T0":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".content-wrapper[data-v-094f7294]{padding:18px;overflow:auto}.content-wrapper>.ivu-card[data-v-094f7294]{margin-bottom:10px}",""])},LuDj:function(t,e,a){"use strict";var r=a("3Q9P");e.a={mixins:[r.a],data:function(){return{page:{current:1,total:100},table:{columns:[],data:[]},component:{is:"",prop:null},loading:!0}},mounted:function(){var t=this;this.$nextTick(function(){t.getLists()})},methods:{pageChange:function(t){this.getLists(t)},openComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.component.is=t,this.component.prop=e},closeComponent:function(){this.component.is="",this.component.prop=null},getLists:function(){}}}},PY6l:function(t,e,a){"use strict";var r={name:"i-table",props:{current:{type:Number},total:{type:Number},pageSize:{type:Number,default:15},title:{type:String,default:"列表"},icon:{type:String,default:"ios-list-box"}},methods:{change:function(t){this.$emit("on-page-change",t)}}},n=(a("Y4hK"),a("KHd+")),o=Object(n.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{title:t.title,icon:t.icon}},[t._t("default"),t._v(" "),a("Page",{attrs:{current:t.current,total:t.total,"page-size":t.pageSize,"show-total":"",size:"small"},on:{"on-change":t.change}})],2)},[],!1,null,"25badb01",null);e.a=o.exports},UqFG:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".ivu-page[data-v-25badb01]{margin-top:15px;text-align:right}",""])},Y4hK:function(t,e,a){"use strict";var r=a("fByT");a.n(r).a},fByT:function(t,e,a){var r=a("UqFG");"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(t.exports=r.locals)},j3Ox:function(t,e,a){var r=a("wbTh");"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(t.exports=r.locals)},lEg9:function(t,e,a){"use strict";var r=a("3Q9P");e.a={mixins:[r.a],props:{props:null},data:function(){return{drawer:{value:!0}}},methods:{closeDrawer:function(t){!1===t&&(this.drawer.value=!1,this.drawer.props=null,this.$emit("on-close",!1),this.$emit("on-refresh"))}}}},rqBi:function(t,e,a){var r=a("I+T0");"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(t.exports=r.locals)},vXPX:function(t,e,a){"use strict";a.r(e);var r=a("2IPJ"),n=a("CoqM"),o=a("PY6l"),s=a("LuDj"),i=a("lEg9"),l=a("x91n"),u={name:"create",components:{IDrawer:l.a},mixins:[i.a],mounted:function(){var t=this;this.$http("authorities/user/create").then(function(e){t.roles.data=e,t.loading=!1})},data:function(){var t=this;return{loading:!0,create:{sex:"women",status:"on"},departments:{data:[]},roles:{data:[]},ruleValidate:{name:[{required:!0,message:"用户姓名必须填写",trigger:"blur"},{type:"string",min:2,max:20,message:"用户姓名字符长度是2-20个字符",trigger:"blur"}],email:[{required:!0,message:"用户邮箱不能为空",trigger:"blur"},{type:"email",message:"用户邮箱格式不正确",trigger:"blur"}],phone:[{required:!0,message:"手机号码必须填写",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],role_id:[{required:!0,type:"number",message:"所属部门不能为空",trigger:"change"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{type:"string",min:6,max:20,message:"用户密码字符长度是6-20个字符",trigger:"blur"}],status:[{required:!0,type:"enum",enum:["off","on"],message:"用户状态不能为空"}],sex:[{required:!0,type:"enum",enum:["women","man"],message:"性别状态不能为空"}],password_confirmation:[{required:!0,message:"二次输入密码不正确",trigger:"blur"},{trigger:"blur",validator:function(e,a,r){return a===t.create.password?r():r("二次输入密码不正确")}}]}}},methods:{submit:function(t){var e=this;this.validate(t).then(function(){e.$http.post("authorities/user",e.create).then(function(){e.loading=!1,e.closeDrawer(!1)})}).catch()}}},p=a("KHd+"),c=Object(p.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-drawer",{attrs:{title:"用户添加",width:620,loading:t.loading}},[a("Form",{ref:"formCreate",attrs:{model:t.create,"label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:t.create.name,callback:function(e){t.$set(t.create,"name",e)},expression:"create.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.create.email,callback:function(e){t.$set(t.create,"email",e)},expression:"create.email"}})],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"手机号码",prop:"phone"}},[a("Input",{attrs:{placeholder:"手机号码"},model:{value:t.create.phone,callback:function(e){t.$set(t.create,"phone",e)},expression:"create.phone"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"用户状态",prop:"status"}},[a("i-switch",{attrs:{"true-value":"on","false-value":"off",size:"large"},model:{value:t.create.status,callback:function(e){t.$set(t.create,"status",e)},expression:"create.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"出生日期",prop:"birthday"}},[a("DatePicker",{attrs:{placeholder:"出生日期",format:"yyyy-MM-dd"},on:{"on-change":function(e){return t.create.birthday=e}}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"用户性别",prop:"sex"}},[a("i-switch",{attrs:{"true-value":"man","false-value":"women",size:"large"},model:{value:t.create.sex,callback:function(e){t.$set(t.create,"sex",e)},expression:"create.sex"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("男")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("女")])])],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"入职时间",prop:"entryday"}},[a("DatePicker",{attrs:{placeholder:"入职时间",format:"yyyy-MM-dd"},on:{"on-change":function(e){return t.create.entryday=e}}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"所属部门",prop:"role_id"}},[a("Select",{model:{value:t.create.role_id,callback:function(e){t.$set(t.create,"role_id",e)},expression:"create.role_id"}},t._l(t.roles.data,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}),1)],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:t.create.password,callback:function(e){t.$set(t.create,"password",e)},expression:"create.password"}})],1),t._v(" "),a("FormItem",{attrs:{label:"确认密码",prop:"password_confirmation"}},[a("Input",{attrs:{placeholder:"请输入确认密码",type:"password"},model:{value:t.create.password_confirmation,callback:function(e){t.$set(t.create,"password_confirmation",e)},expression:"create.password_confirmation"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){return t.submit("formCreate")}}},[t._v("提交")])],1)],1)},[],!1,null,"8a647bd0",null).exports,d={name:"create",components:{IDrawer:l.a},mixins:[i.a],mounted:function(){var t=this;this.$http("authorities/user/".concat(this.props.id,"/edit")).then(function(e){t.update=e.data,t.roles.data=e.roles,t.loading=!1})},data:function(){var t=this;return{loading:!0,update:{sex:"women",status:"on"},departments:{data:[]},roles:{data:[]},ruleValidate:{name:[{required:!0,message:"用户姓名必须填写",trigger:"blur"},{type:"string",min:2,max:20,message:"用户姓名字符长度是2-20个字符",trigger:"blur"}],email:[{required:!0,message:"用户邮箱不能为空",trigger:"blur"},{type:"email",message:"用户邮箱格式不正确",trigger:"blur"}],phone:[{required:!0,message:"手机号码必须填写",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],role_id:[{required:!0,type:"number",message:"所属部门不能为空",trigger:"change"}],password:[{type:"string",min:6,max:20,message:"用户密码字符长度是6-20个字符",trigger:"blur"}],status:[{required:!0,type:"enum",enum:["off","on"],message:"用户状态不能为空"}],sex:[{required:!0,type:"enum",enum:["women","man"],message:"性别状态不能为空"}],password_confirmation:[{trigger:"blur",validator:function(e,a,r){return a===t.update.password?r():r("二次输入密码不正确")}}]}}},methods:{submit:function(t){var e=this;this.validate(t).then(function(){e.$http.put("authorities/user/".concat(e.props.id),e.update).then(function(){e.loading=!1,e.closeDrawer(!1)})}).catch()}}},m=Object(p.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-drawer",{attrs:{title:"用户添加",width:620,loading:t.loading}},[a("Form",{ref:"formUpdate",attrs:{model:t.update,"label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:t.update.name,callback:function(e){t.$set(t.update,"name",e)},expression:"update.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.update.email,callback:function(e){t.$set(t.update,"email",e)},expression:"update.email"}})],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"手机号码",prop:"phone"}},[a("Input",{attrs:{placeholder:"手机号码"},model:{value:t.update.phone,callback:function(e){t.$set(t.update,"phone",e)},expression:"update.phone"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"用户状态",prop:"status"}},[a("i-switch",{attrs:{"true-value":"on","false-value":"off",size:"large"},model:{value:t.update.status,callback:function(e){t.$set(t.update,"status",e)},expression:"update.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"出生日期",prop:"birthday"}},[a("DatePicker",{attrs:{placeholder:"出生日期",value:t.update.birthday,format:"yyyy-MM-dd"},on:{"on-change":function(e){return t.update.birthday=e}}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"用户性别",prop:"sex"}},[a("i-switch",{attrs:{"true-value":"man","false-value":"women",size:"large"},model:{value:t.update.sex,callback:function(e){t.$set(t.update,"sex",e)},expression:"update.sex"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("男")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("女")])])],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"入职时间",prop:"entryday"}},[a("DatePicker",{attrs:{placeholder:"入职时间",value:t.update.entryday,format:"yyyy-MM-dd"},on:{"on-change":function(e){return t.update.entryday=e}}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"所属部门",prop:"department_id"}},[a("Select",{model:{value:t.update.department_id,callback:function(e){t.$set(t.update,"department_id",e)},expression:"update.department_id"}},t._l(t.departments.data,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}),1)],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:t.update.password,callback:function(e){t.$set(t.update,"password",e)},expression:"update.password"}})],1),t._v(" "),a("FormItem",{attrs:{label:"确认密码",prop:"password_confirmation"}},[a("Input",{attrs:{placeholder:"请输入确认密码",type:"password"},model:{value:t.update.password_confirmation,callback:function(e){t.$set(t.update,"password_confirmation",e)},expression:"update.password_confirmation"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){return t.submit("formUpdate")}}},[t._v("提交")])],1)],1)},[],!1,null,"8e4d1bd2",null).exports,f={name:"index",mixins:[s.a],components:{ITable:o.a,ISearch:n.a,IContent:r.a,Create:c,Update:m},data:function(){return{search:{},table:{columns:[{title:"姓名",slot:"name"},{title:"邮箱",slot:"email"},{title:"手机号码",slot:"phone"},{title:"所属部门",slot:"role"},{title:"性别",slot:"sex"},{title:"生日",slot:"birthday"},{title:"入职时间",slot:"entryday"},{title:"状态",slot:"status"},{title:"操作",slot:"action"}]},loading:!0}},methods:{getLists:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$http.get("authorities/user",{params:Object.assign({},this.search,{page:e})}).then(function(e){t.table.data=e.data,t.page.total=e.total,t.page.current=e.current_page}).finally(function(){t.loading=!1})},status:function(t){var e=this;this.loading=!0,this.$http.put("authorities/user/".concat(t.id,"/status"),{status:"on"===t.status?"off":"on"}).then(function(){e.getLists(e.page.current)})}}},h=Object(p.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-content",{attrs:{"spin-show":t.loading}},[a("i-search",{model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("FormItem",{attrs:{label:"姓名","label-width":100}},[a("Input",{attrs:{placeholder:"姓名"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",icon:"ios-search"}},[t._v("搜索")]),t._v(" "),a("Button",{attrs:{type:"success",icon:"ios-add"},on:{click:function(e){return t.openComponent("Create")}}},[t._v("添加")])],1)],1),t._v(" "),a("i-table",{attrs:{current:t.page.current,total:t.page.total},on:{"on-page-change":t.pageChange}},[a("Table",{attrs:{columns:t.table.columns,data:t.table.data},scopedSlots:t._u([{key:"name",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.name))])]}},{key:"email",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.email))])]}},{key:"phone",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.phone))])]}},{key:"role",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.role.name))])]}},{key:"sex",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.sex))])]}},{key:"birthday",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.birthday))])]}},{key:"entryday",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.entryday))])]}},{key:"status",fn:function(e){var r=e.row;return e.index,[a("Poptip",{attrs:{confirm:"",title:"你确定要更改这个用户的状态吗？"},on:{"on-ok":function(e){return t.status(r)}}},[a("Button",{attrs:{type:"off"===r.status?"error":"success",size:"small"}},[t._v(t._s("off"===r.status?"关闭":"开启")+"\n                    ")])],1)]}},{key:"action",fn:function(e){var r=e.row;return e.index,[a("Button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return t.openComponent("Update",r)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a(t.component.is,{tag:"component",attrs:{props:t.component.prop},on:{"on-close":t.closeComponent,"on-refresh":function(e){return t.getLists(1)}}})],1)},[],!1,null,"4cc602b0",null);e.default=h.exports},wbTh:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.modal-body[data-v-441e9ea6] {\n    height: calc(100% - 53px);\n    overflow-y: auto;\n    margin-right: -16px;\n    padding-right: 16px;\n}\n.compon-drawer-footer[data-v-441e9ea6]{\n    border-top: 1px solid #e8e8e8;\n    padding: 10px 16px;\n    text-align: right;\n    background: #fff;\n}\n.compon-drawer-footer *[data-v-441e9ea6]{\n    text-align: right;\n}\n",""])},x91n:function(t,e,a){"use strict";var r={name:"i-drawer",props:{title:{type:String,default:"弹窗"},width:{type:Number,default:520},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$parent.closeDrawer(t)}}},n=(a("CpXx"),a("KHd+")),o=Object(n.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{title:t.title,value:!0,transfer:!1,"mask-closable":!1,width:t.width},on:{"on-visible-change":t.change}},[a("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"compon-drawer-footer"},[t._t("footer")],2),t._v(" "),t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},[],!1,null,"441e9ea6",null);e.a=o.exports}}]);