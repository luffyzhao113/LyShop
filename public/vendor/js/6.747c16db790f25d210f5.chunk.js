(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2IPJ":function(t,e,a){"use strict";var n={name:"i-content",props:{spinShow:{type:Boolean,default:!0}}},o=(a("CvB1"),a("KHd+")),r=Object(o.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-wrapper"},[this._t("default"),this._v(" "),this.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):this._e()],2)},[],!1,null,"29a77876",null);e.a=r.exports},"3Q9P":function(t,e,a){"use strict";e.a={methods:{validate:function(t){var e=this;return new Promise(function(a,n){e.$refs[t].validate(function(t){t?a():n()})})}}}},"5Q8M":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.modal-body[data-v-e3944ca2] {\n    height: calc(100% - 53px);\n    overflow-y: auto;\n    margin-right: -16px;\n    padding-right: 16px;\n}\n.compon-drawer-footer[data-v-e3944ca2]{\n    border-top: 1px solid #e8e8e8;\n    padding: 10px 16px;\n    text-align: right;\n    background: #fff;\n}\n.compon-drawer-footer *[data-v-e3944ca2]{\n    text-align: right;\n}\n",""])},"5nZK":function(t,e,a){"use strict";var n=a("I3AI");a.n(n).a},"6KdH":function(t,e,a){"use strict";var n=a("mkpn");a.n(n).a},As9k:function(t,e,a){"use strict";a.r(e);var n=a("2IPJ"),o=a("CoqM"),r=a("PY6l"),s=a("LuDj"),i=a("lEg9"),l=a("x91n"),c={name:"form-tags",mixins:[a("NnD1").a],props:{placeholder:{type:String,default:"标签"},value:{type:Array,default:function(){return[]}}},data:function(){return{specs:this.value}},methods:{onSearch:function(t){""!==t&&void 0===this.specs.find(function(e){return e===t})?(this.specs.push(t),this.$refs.addTags.handleClear(),this.$emit("input",this.specs),this.dispatch("FormItem","on-form-blur",this.specs)):this.$Message.error(this.placeholder+" 不能为空，或者以存在！")},handleClose:function(t,e){this.specs.splice(e,1),this.dispatch("FormItem","on-form-blur",this.specs),this.$emit("input",this.specs)}},watch:{value:function(t){this.specs=t}}},u=(a("6KdH"),a("KHd+")),p=Object(u.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-tags"},[t._l(t.specs,function(e,n){return a("Tag",{key:n,attrs:{name:n,closable:"",type:"dot"},on:{"on-close":t.handleClose}},[t._v(t._s(e))])}),t._v(" "),a("div",{staticClass:"form-tags-input"},[a("Input",{ref:"addTags",attrs:{placeholder:t.placeholder,search:"","enter-button":"添加"+t.placeholder},on:{"on-search":t.onSearch}})],1)],2)},[],!1,null,"42ffa8fa",null).exports,d={data:function(){return{loading:!1,data:{},ruleValidate:{name:[{required:!0,message:"名称必须填写",trigger:"blur"},{type:"string",min:2,max:20,message:"名称字符长度是2-20个字符",trigger:"blur"}],values:[{required:!0,type:"array",message:"属性值必须填写",trigger:"blur"}],type:[{required:!0,message:"类型必须填写",trigger:"blur"}],description:[{max:255,message:"属性描述字符长度最多255个字条",trigger:"blur"}]}}}},f={name:"create",mixins:[i.a,d],components:{FormTags:p,IDrawer:l.a},methods:{submit:function(t){var e=this;this.validate(t).then(function(){e.loading=!0,e.$http.post("goods/spec",e.data).then(function(){e.closeDrawer(!1)}).finally(function(){e.loading=!1})})}}},m=Object(u.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-drawer",{attrs:{loading:t.loading}},[a("Form",{ref:"formCreate",attrs:{model:t.data,"label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"类型",prop:"type"}},[a("Select",{model:{value:t.data.type,callback:function(e){t.$set(t.data,"type",e)},expression:"data.type"}},[a("Option",{attrs:{value:"attr"}},[t._v("属性")]),t._v(" "),a("Option",{attrs:{value:"spec"}},[t._v("规格")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"值",prop:"values"}},[a("form-tags",{attrs:{placeholder:"属性值"},model:{value:t.data.values,callback:function(e){t.$set(t.data,"values",e)},expression:"data.values"}})],1),t._v(" "),a("FormItem",{attrs:{label:"描述",prop:"description"}},[a("Input",{attrs:{type:"textarea",rows:3},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){return t.submit("formCreate")}}},[t._v("提交")])],1)],1)},[],!1,null,"33f136f2",null).exports,h={name:"update",mixins:[i.a,d],components:{FormTags:p,IDrawer:l.a},data:function(){return{loading:!0}},mounted:function(){var t=this;this.$http.get("goods/spec/".concat(this.props.id,"/edit")).then(function(e){t.data=e.row}).finally(function(){t.loading=!1})},methods:{submit:function(t){var e=this;this.validate(t).then(function(){e.loading=!0,e.$http.put("goods/spec/".concat(e.props.id),e.data).then(function(){e.closeDrawer(!1)}).finally(function(){e.loading=!1})})}}},v=Object(u.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-drawer",{attrs:{loading:t.loading}},[a("Form",{ref:"formUpdate",attrs:{model:t.data,"label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"类型",prop:"type"}},[a("Select",{model:{value:t.data.type,callback:function(e){t.$set(t.data,"type",e)},expression:"data.type"}},[a("Option",{attrs:{value:"attr"}},[t._v("属性")]),t._v(" "),a("Option",{attrs:{value:"spec"}},[t._v("规格")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"值",prop:"values"}},[a("form-tags",{attrs:{placeholder:"属性值"},model:{value:t.data.values,callback:function(e){t.$set(t.data,"values",e)},expression:"data.values"}})],1),t._v(" "),a("FormItem",{attrs:{label:"描述",prop:"description"}},[a("Input",{attrs:{type:"textarea",rows:3},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){return t.submit("formUpdate")}}},[t._v("提交")])],1)],1)},[],!1,null,"76900eba",null).exports,g={name:"index",mixins:[s.a],components:{ITable:r.a,ISearch:o.a,IContent:n.a,Create:m,Update:v},data:function(){return{loading:!1,table:{columns:[{title:"名称",slot:"name"},{title:"类型",slot:"type"},{title:"值",slot:"values"},{title:"描述",slot:"description"},{title:"操作",slot:"action"}]},search:{}}},methods:{getLists:function(t){var e=this;this.loading=!0,this.$http.get("goods/spec",{params:Object.assign({},this.search,{page:t})}).then(function(t){e.table.data=t.data,e.page.total=t.total,e.page.current=t.current_page}).finally(function(){e.loading=!1})},remove:function(t){var e=this;this.loading=!0,this.$http.delete("goods/spec/".concat(t.id)).then(function(){e.getLists(e.page.current)}).catch(function(){e.loading=!1})}},filters:{values:function(t){return t.join(",")},type:function(t){return"attr"===t?"属性":"规格"}}},b=Object(u.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-content",{attrs:{"spin-show":t.loading}},[a("i-search",[a("FormItem",{attrs:{label:"名称"}},[a("Input",{attrs:{placeholder:"名称"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"类型"}},[a("iSelect",{attrs:{clearable:""},model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[a("Option",{attrs:{value:"attr"}},[t._v("属性")]),t._v(" "),a("Option",{attrs:{value:"spec"}},[t._v("规格")])],1)],1),t._v(" "),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.getLists(1)}}},[t._v("搜索")]),t._v(" "),a("Button",{attrs:{type:"success",icon:"ios-add"},on:{click:function(e){return t.openComponent("Create")}}},[t._v("添加")])],1)],1),t._v(" "),a("i-table",{attrs:{current:t.page.current,total:t.page.total},on:{"on-page-change":t.pageChange}},[a("Table",{attrs:{columns:t.table.columns,data:t.table.data},scopedSlots:t._u([{key:"name",fn:function(e){var n=e.row;return e.index,[a("span",[t._v(t._s(n.name))])]}},{key:"type",fn:function(e){var n=e.row;return e.index,[a("span",[t._v(t._s(t._f("type")(n.type)))])]}},{key:"description",fn:function(e){var n=e.row;return e.index,[a("span",[t._v(t._s(n.description))])]}},{key:"values",fn:function(e){var n=e.row;return e.index,[a("span",[t._v(t._s(t._f("values")(n.values)))])]}},{key:"action",fn:function(e){var n=e.row;return e.index,[a("Button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return t.openComponent("Update",n)}}},[t._v("编辑")]),t._v(" "),a("Poptip",{attrs:{confirm:"",title:"你确定要删除这个商品属性吗？"},on:{"on-ok":function(e){return t.remove(n)}}},[a("Button",{attrs:{type:"error",size:"small"}},[t._v("删除")])],1)]}}])})],1),t._v(" "),a(t.component.is,{tag:"component",attrs:{props:t.component.prop},on:{"on-close":t.closeComponent,"on-refresh":function(e){return t.getLists(1)}}})],1)},[],!1,null,"ebdce3fc",null);e.default=b.exports},CoqM:function(t,e,a){"use strict";var n={name:"i-search",props:{value:{type:Object},title:{type:String,default:"搜索"},icon:{type:String,default:"ios-search"}}},o=a("KHd+"),r=Object(o.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("Card",{attrs:{title:this.title,icon:this.icon}},[e("Form",{ref:"formSearch",attrs:{model:this.value,inline:"","label-width":60}},[this._t("default")],2)],1)},[],!1,null,"aca4acc4",null);e.a=r.exports},CvB1:function(t,e,a){"use strict";var n=a("fr25");a.n(n).a},I3AI:function(t,e,a){var n=a("5Q8M");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,o);n.locals&&(t.exports=n.locals)},LuDj:function(t,e,a){"use strict";var n=a("3Q9P");e.a={mixins:[n.a],data:function(){return{page:{current:1,total:100},table:{columns:[],data:[]},component:{is:"",prop:null},loading:!0}},mounted:function(){var t=this;this.$nextTick(function(){t.getLists()})},methods:{pageChange:function(t){this.getLists(t)},openComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.component.is=t,this.component.prop=e},closeComponent:function(){this.component.is="",this.component.prop=null},openRoute:function(t,e){this.$router.push({name:t,query:e})},getLists:function(){}}}},NnD1:function(t,e,a){"use strict";e.a={methods:{dispatch(t,e,a){let n=this.$parent||this.$root,o=n.$options.name;for(;n&&(!o||o!==t);)(n=n.$parent)&&(o=n.$options.name);n&&n.$emit.apply(n,[e].concat(a))},broadcast(t,e,a){(function t(e,a,n){this.$children.forEach(o=>{o.$options.name===e?o.$emit.apply(o,[a].concat(n)):t.apply(o,[e,a].concat([n]))})}).call(this,t,e,a)}}}},PY6l:function(t,e,a){"use strict";var n={name:"i-table",props:{current:{type:Number},total:{type:Number},pageSize:{type:Number,default:15},title:{type:String,default:"列表"},icon:{type:String,default:"ios-list-box"}},methods:{change:function(t){this.$emit("on-page-change",t)}}},o=(a("Y4hK"),a("KHd+")),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{title:t.title,icon:t.icon}},[t._t("default"),t._v(" "),a("Page",{attrs:{current:t.current,total:t.total,"page-size":t.pageSize,"show-total":"",size:"small"},on:{"on-change":t.change}})],2)},[],!1,null,"25badb01",null);e.a=r.exports},UqFG:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".ivu-page[data-v-25badb01]{margin-top:15px;text-align:right}",""])},Y4hK:function(t,e,a){"use strict";var n=a("fByT");a.n(n).a},"b/my":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".form-tags-input[data-v-42ffa8fa]{width:250px;display:inline-block;vertical-align:middle}",""])},fByT:function(t,e,a){var n=a("UqFG");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,o);n.locals&&(t.exports=n.locals)},fr25:function(t,e,a){var n=a("h11m");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,o);n.locals&&(t.exports=n.locals)},h11m:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".content-wrapper[data-v-29a77876]{padding:18px;overflow:auto}.content-wrapper>.ivu-card[data-v-29a77876]{margin-bottom:10px}",""])},lEg9:function(t,e,a){"use strict";var n=a("3Q9P");e.a={mixins:[n.a],props:{props:null},data:function(){return{drawer:{value:!0}}},methods:{closeDrawer:function(t){!1===t&&(this.drawer.value=!1,this.drawer.props=null,this.$emit("on-close",!1),this.$emit("on-refresh"))}}}},mkpn:function(t,e,a){var n=a("b/my");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,o);n.locals&&(t.exports=n.locals)},x91n:function(t,e,a){"use strict";var n={name:"i-drawer",props:{title:{type:String,default:"弹窗"},width:{type:Number,default:720},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$parent.closeDrawer(t)}}},o=(a("5nZK"),a("KHd+")),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{title:t.title,value:!0,transfer:!1,"mask-closable":!1,width:t.width},on:{"on-visible-change":t.change}},[a("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"compon-drawer-footer"},[t._t("footer")],2),t._v(" "),t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},[],!1,null,"e3944ca2",null);e.a=r.exports}}]);